<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="itwillbs.p2c3.boogimovie.mapper.TicketingMapper">
	<select id="fianlListSelect" resultType="itwillbs.p2c3.boogimovie.vo.ScreenSessionVO">
	    SELECT *
	    FROM reserve_view
	    WHERE movie_num = #{movie_num}
	    AND theater_num = #{theater_num}
	    AND scs_date = #{scs_date}
	    AND scs_empty_seat > 0
	    <if test="scs_date == current_date">
	        AND STR_TO_DATE(scs_start_time, '%H:%i') > CURRENT_TIME()
	    </if>
	</select>
	
	<select id="chooseSeatSelect" resultType="itwillbs.p2c3.boogimovie.vo.ScreenSessionVO">
		SELECT *
		FROM tic_final_list
		WHERE movie_num = #{movie_num}
		AND theater_num = #{theater_num}
		AND DATE_FORMAT(scs_start_date, '%Y-%m-%d %H:%i') = DATE_FORMAT(#{scs_start_date}, '%Y-%m-%d %H:%i')
    	AND DATE_FORMAT(scs_end_date, '%Y-%m-%d %H:%i') = DATE_FORMAT(#{scs_end_date}, '%Y-%m-%d %H:%i')
	</select>
	
	<select id="feeCalc" resultType="map" parameterType="map">
		SELECT *
		FROM fee
		WHERE 1=1
		<if test="fee_day_keyword != null and !fee_day_keyword.equals('')">
			AND fee_day_keyword = #{fee_day_keyword}
		</if>
		<if test="fee_time_keyword != null and !fee_time_keyword.equals('')">
			AND   fee_time_keyword = #{fee_time_keyword}
		</if>
		<if test="fee_dimension_keyword != null and !fee_dimension_keyword.equals('')">
			AND   fee_dimension_keyword = #{fee_dimension_keyword}
		</if>
			AND   fee_age_keyword = 'NP'
	</select>
	
	<select id="feeCalcAge" resultType="itwillbs.p2c3.boogimovie.vo.FeeAgeVO">
		SELECT *
		FROM fee_age
	</select>
		

</mapper>